<div xmlns="http://www.w3.org/1999/html">
<div class="header">
  <h2>Thống kê số liệu phòng thu nhập thấp</h2>
  <form [formGroup]="formGroup">

  <div class="list-inputsearch">
    <label>Ngày bắt đầu</label>

    <input formControlName="startLowDate" id="startLowDate" type="date" #startLowDate (change)="startDateLowString = startLowDate.value"
            required>
    <label>Ngày kết thúc</label>
    <input formControlName="finalLowDate" id="finalLowDate" type="date" #finalLowDate (change)="finishDateLowString = finalLowDate.value"
           required>

<!--
    <span style="color: red" *ngIf="formGroup.controls.finalLowDate.hasError('required') && formGroup.controls.finalLowDate.touched">Vui lòng chọn ngày kết thúc</span>
-->
<!--    <span style="color: red" *ngIf="formGroup.controls.finalLowDate.hasError('invalidDate') &&  formGroup.controls.finalLowDate.touched">Ngày kết thúc phải lớn hơn ngày bắt đầu </span>-->
    <label>Số lượng</label>
    <input formControlName="rowLowNumbers" id="rowLowNumbers" type="text" #rowLowNumbers (change)="rowNumber = rowLowNumbers.value" required>
    <span style="color: red" *ngIf="formGroup.controls.rowLowNumbers.hasError('pattern')  && formGroup.controls.rowLowNumbers.touched">Chỉ được chọn số</span>
    <div class="list-inputsearch-icon">
      <i class="fa fa-search list-inputsearch-icon-search" aria-hidden="true"
         (click)="findAllLowWithCondition(startDateLowString,finishDateLowString,rowNumber)"></i>
    </div>
  </div>
  </form>

</div>
<table class="table tab">
  <thead class="thead-dark">
  <tr>
    <th scope="col">STT</th>
    <th scope="col">Tên mặt Bằng</th>
    <th scope="col">Ngày bắt đầu</th>
    <th scope="col">Tổng thu</th>
    <th scope="col">Ghi chú</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let i of static; let z =index">
    <td scope="row">{{z+1}}</td>
    <td scope="row">MB_{{i.plane.id}}</td>
    <td scope="row">{{i.start_date| date: 'dd/MM/yyyy'}}</td>
    <td scope="row">{{i.total |number:'4.0'}} VNĐ</td>
    <td scope="row">{{i.information}}</td>
  </tr>
  <tr>
    <p>Tổng: {{total() > 0 ? (total()  |number:'4.0' ): 0}} VNĐ </p>
  </tr>
  </tbody>
</table>
  <div class="list-inputsearch-icon">
    <i class="fa fa-print list-inputsearch-icon-search" aria-hidden="true"
       (click)="dowloadFile(startDateLowString,finishDateLowString,rowNumber)"></i>
  </div>
  <div class="chart-container">
    <canvas  id="ChartRent" >{{ chart }}</canvas>
  </div>
</div>
